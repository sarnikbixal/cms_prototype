(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,n){},138:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setOrderSuccess",function(){return R}),n.d(a,"setOrderFailure",function(){return M}),n.d(a,"placeOrder",function(){return P}),n.d(a,"getOrder",function(){return _}),n.d(a,"updateOrderStatus",function(){return B}),n.d(a,"updateOrderStatusSuccess",function(){return U}),n.d(a,"downloadICS",function(){return K}),n.d(a,"createICS",function(){return Y});var r={};n.r(r),n.d(r,"deleteNotificationSuccess",function(){return G}),n.d(r,"deleteNotification",function(){return Q}),n.d(r,"newNotificationSuccess",function(){return V}),n.d(r,"mockTicketNotification",function(){return X});var i=n(0),c=n.n(i),o=n(11),s=n.n(o),l=n(14),d=n(34),u="SET_ORDER_SUCCESS",m="SET_ORDER_FAILURE",p="UPDATE_ORDER_STATUS_SUCCESS",f="DELETE_NOTIFICATION_SUCCESS",h="NEW_NOTIFICATION_SUCCESS",O=n(10),v={};var b=n(48),E={model:{}};var k=Object(l.c)({order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return t.order;case p:return Object(d.a)({},e,{steps:t.steps});default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TEST_NOTIFICATION":case h:return Object(d.a)({},e,{model:Object(d.a)({},e.model,Object(b.a)({},t.notification.notificationId,t.notification))});case f:var n=O.cloneDeep(e.model);return delete n[t.id],n=-1===t.id?{}:n,Object(d.a)({},e,{model:n});default:return e}}}),C=n(81),N=n.n(C),j=n(82);var g=n(18),S=n(15),y=n(20),I=n(19),D=n(21),T=n(182),A=n(179),w=n(24),F=n(49),x="http://localhost:3001";function R(e){return{type:u,order:e}}function M(e){return{type:m,order:e}}function P(e){var t="".concat(x,"/api/placeOrder"),n={params:{order:e}};return function(e){return new Promise(function(a,r){F.post(t,n).then(function(t){var n=t.data;n.error?(e(M(n.error)),r(n.error)):(e(R(n)),a(n))}).catch(function(t){e(R(t.message)),r(t.message)})})}}function _(e){var t="".concat(x,"/api/getOrder"),n={params:{orderId:"order_".concat(e)}};return function(e){return new Promise(function(a,r){F.post(t,n).then(function(t){var n=t.data;n.error?(e(M(n.error)),r(n.error)):(e(R(n)),a(n))}).catch(function(t){e(M(t.message)),r(t.message)})})}}function B(e){return function(t){t(U(e))}}function U(e){return{type:p,steps:e}}function K(e){var t="".concat(x,"/api/downloadICS"),n={};return function(e){F.get(t,n).then(function(e){var t=e.data;console.log(t)}).catch(function(e){console.log(e)})}}function Y(e,t){var n="".concat(x,"/api/createICS"),a={params:{order:e,date:t}};return function(e){return new Promise(function(e,t){F.post(n,a).then(function(n){var a=n.data;console.log(a),a.error?t(a.error):e(a)}).catch(function(e){t(e.message)})})}}var L=function(e){return O.map(e.products,function(e){return c.a.createElement("div",{className:"product",key:e.id},c.a.createElement("span",null,e.title),c.a.createElement("span",null,e.desc))})},W=function(e){return c.a.createElement("div",{className:"order"},c.a.createElement(L,{products:e.order.products}))},J=function(e){return c.a.createElement("div",{className:"button",onClick:function(){e.submitOrderFn()}},"PLACE ORDER")},H=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(I.a)(t).call(this))).placeOrder=function(){n.props.orderActions.placeOrder(n.state.order).then(function(e){n.setState({order:e,isPlaced:!0}),n.props.history.push("/order-confirmation/".concat(e.id))}).catch(function(e){console.log(e)})},n.state={isPlaced:!1,order:{id:1,placedDate:null,lastUpdateDate:null,user:{username:"test_user1",firstName:"test",lastName:"user",email:"test_user@email.com"},products:[{id:1,title:'AOC 22" MONITOR',desc:'AOC 22" MONITOR, AOC 22" MONITOR, AOC 22" MONITOR, AOC 22" MONITOR, AOC 22" MONITOR, AOC 22" MONITOR'},{id:2,title:"MacBook Keyboard",desc:"MacBook Keyboard, MacBook Keyboard, MacBook Keyboard, MacBook Keyboard, MacBook Keyboard, MacBook Keyboard"}],steps:[{id:1,status:"Ordered",timestamp:null,isPending:!0,isFilled:!1},{id:2,status:"Reviewed",timestamp:null,isPending:!0,isFilled:!1},{id:3,status:"Signed-Off",timestamp:null,isPending:!0,isFilled:!1},{id:4,status:"Ready For Pickup",timestamp:null,isPending:!0,isFilled:!1},{id:5,status:"Delivered",timestamp:null,isPending:!0,isFilled:!1}]}},n}return Object(D.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"order-container"},c.a.createElement(W,{order:this.state.order}),c.a.createElement(J,{submitOrderFn:this.placeOrder}))}}]),t}(i.Component);var $=Object(w.b)(function(e,t){return{order:e.order}},function(e){return{orderActions:Object(l.b)(a,e)}})(H),q=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(I.a)(t).call(this))).componentDidMount=function(){n.props.orderActions.getOrder(n.orderId).then(function(e){console.log(e),n.setState({order:e})}).catch(function(e){console.log(e)})},n.orderId=e.match.params.id,n.state={},n}return Object(D.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"order-confirm-container"},c.a.createElement("div",null,"Confirm Order"),c.a.createElement("div",null,"Your Order Has Been Placed: "),c.a.createElement(L,{products:this.props.order.products}),c.a.createElement("a",{href:"/order-status/".concat(this.props.order.id)},"track order"))}}]),t}(i.Component);var z=Object(w.b)(function(e,t){return{order:e.order}},function(e){return{orderActions:Object(l.b)(a,e)}})(q);function G(e){return{type:f,id:e}}function Q(e){return function(t){t(G(e))}}function V(e){return{type:"NEW_NOTIFICATION_SUCCESS",notification:e}}function X(e,t){return function(n){var a=O.find(e.steps,{id:t});n(V({notificationType:"ticket",displayMessage:"Ticket Submitted: Order #:".concat(e.id," | Blocked-Action: ").concat(a.status),timestamp:new Date,notificationId:(new Date).getTime()}))}}var Z=n(41),ee=n.n(Z),te=function(e){return Z(e).format("M/DD/YY hh:mm A").trim()},ne=function(e){var t=0;return O.map(e.steps,function(n){var a=++t===e.steps.length;return c.a.createElement(re,{step:n,isLast:a,key:n.id,submitTicketFn:e.submitTicketFn})})},ae=function(e){return c.a.createElement("div",{className:"flex-container"},c.a.createElement("div",{className:"flex-item spacer ".concat(e.type)}))},re=function(e){var t=e.step.timestamp&&!e.step.isFilled||!e.step.isFilled&&!e.step.isPending,n=e.step.isFilled?"full":"half";return c.a.createElement("div",null,c.a.createElement("div",{className:"step flex-container ".concat(e.step.isFilled?"filled":""," ").concat(t?"blocked":"")},c.a.createElement("div",{className:"flex-item"},c.a.createElement("div",{className:"step-box"})),c.a.createElement("div",{className:"flex-item"},"-"),c.a.createElement("div",{className:"flex-item step-info"},c.a.createElement("span",{className:"step-status"},e.step.status),e.step.timestamp?c.a.createElement("span",{className:"step-date"}," - ",te(e.step.timestamp)):null)),t?c.a.createElement("div",{className:"flex-container"},c.a.createElement("div",{className:"flex-item"},"This step is taking longer than average to proceed. "),c.a.createElement("div",{className:"flex-item"},e.step.ticket&&!e.step.ticket.isResolved?c.a.createElement("span",null,"Ticket Submitted: ",te(e.step.ticket.timestamp)):c.a.createElement("div",{className:"link-button",onClick:function(){return e.submitTicketFn(e.step.id)}},"Submit Ticket"))):null,e.isLast?null:c.a.createElement(ae,{type:n}))},ie=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(I.a)(t).call(this))).componentDidMount=function(){O.isEmpty(n.props.order)&&n.props.orderActions.getOrder(n.orderId).then(function(e){n.fillStepsTimer(2,4)}).catch(function(e){console.log(e)})},n.componentDidUpdate=function(e){e.order.steps!==n.props.order.steps&&-1===O.findIndex(n.props.order.steps,{isFilled:!1})&&n.setAllFilled()},n.fillStepsTimer=function(e,t){var a=e,r=setInterval(function(){var e=O.cloneDeep(n.props.order.steps),i=O.find(e,{id:a}),c=O.find(e,{id:a-1});a<=e.length&&c.isFilled?(i.isPending=!1,i.isFilled=!t||t!==a,i.timestamp=(new Date).getTime(),n.props.orderActions.updateOrderStatus(e),a++):clearInterval(r)},500)},n.submitTicket=function(e){var t=O.cloneDeep(n.props.order.steps);O.find(t,{id:e}).ticket={timestamp:(new Date).getTime(),isResolved:!1},n.props.orderActions.updateOrderStatus(t),n.props.notificationActions.mockTicketNotification(n.props.order,e),setTimeout(function(){var t=O.cloneDeep(n.props.order.steps),a=O.find(t,{id:e});a.ticket.isResolved=!0,a.isFilled=!0,n.props.orderActions.updateOrderStatus(t),n.fillStepsTimer(e+1,null)},1e3)},n.orderId=e.match.params.id,n.state={},n}return Object(D.a)(t,e),Object(S.a)(t,[{key:"setAllFilled",value:function(){this.setState({isReadyForPickup:!0})}},{key:"render",value:function(){return c.a.createElement("div",{className:"status-container"},c.a.createElement("div",{className:"steps-container"},c.a.createElement(ne,{steps:this.props.order.steps,submitTicketFn:this.submitTicket}),this.state.isReadyForPickup?c.a.createElement("div",{className:"button-container"},c.a.createElement("a",{href:"/schedule-pickup/".concat(this.props.order.id)},"schedule pick-up")):null))}}]),t}(i.Component);var ce=Object(w.b)(function(e,t){return{order:e.order,notifications:e.notifications}},function(e){return{orderActions:Object(l.b)(a,e),notificationActions:Object(l.b)(r,e)}})(ie),oe=n(178),se=n(175),le=n(89),de=n(60),ue=n(177),me=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(I.a)(t).call(this))).componentDidMount=function(){O.isEmpty(n.props.order)&&n.props.orderActions.getOrder(n.orderId).then(function(e){}).catch(function(e){})},n.handleDateChange=function(e){n.state={selectedDate:e}},n.handleConfirm=function(){n.props.orderActions.createICS(n.props.order,n.state.selectedDate).then(function(e){n.setState({isReadyForDownload:!0})}).catch(function(e){})},n.orderId=e.match.params.id,n.state={selectedDate:new Date},n.classes=Object(se.a)({grid:{width:"60%"}}),n}return Object(D.a)(t,e),Object(S.a)(t,[{key:"handleDownloadICS",value:function(){window.location.href="http://localhost:3001/api/downloadICS"}},{key:"render",value:function(){var e,t=this;return c.a.createElement("div",{className:"schedule-container"},c.a.createElement(de.c,{utils:le.a},c.a.createElement(oe.a,{container:!0,className:this.classes,justify:"space-around"},c.a.createElement(de.a,{margin:"normal",id:"mui-pickers-date",label:"Select Date",value:this.state.selectedDate,onChange:this.handleDateChange,KeyboardButtonProps:{"aria-label":"select date"}}),c.a.createElement(de.b,{margin:"normal",id:"mui-pickers-time",label:"Select Time",value:this.state.selectedDate,onChange:this.handleDateChange,KeyboardButtonProps:{"aria-label":"select time"}}))),this.state.isReadyForDownload?c.a.createElement("div",{className:"download-ico"},c.a.createElement(ue.a,{variant:"contained",color:"primary",onClick:function(){t.handleDownloadICS()}},"Download ICS")):c.a.createElement("div",{className:"confirm-pickup"},c.a.createElement("span",null," Confirm pickup at ",(e=this.state.selectedDate,Z(e).format("M/DD/YY hh:mm A").trim()),"."),c.a.createElement(ue.a,{variant:"contained",color:"primary",onClick:function(){t.handleConfirm()}},"Confrim Pickup")))}}]),t}(i.Component);var pe=Object(w.b)(function(e,t){return{order:e.order,notifications:e.notifications}},function(e){return{orderActions:Object(l.b)(a,e),notificationActions:Object(l.b)(r,e)}})(me),fe=function(e){return c.a.createElement("div",{className:"main-content"},c.a.createElement(T.a,null,c.a.createElement(A.a,{exact:!0,path:"/",render:function(e){return c.a.createElement($,e)}},c.a.createElement(A.a,{exact:!0,path:"/checkout",render:function(e){return c.a.createElement($,e)}})),c.a.createElement(A.a,{exact:!0,path:"/order-confirmation/:id",render:function(e){return c.a.createElement(z,e)}}),c.a.createElement(A.a,{exact:!0,path:"/order-status/:id",render:function(e){return c.a.createElement(ce,e)}}),c.a.createElement(A.a,{exact:!0,path:"/schedule-pickup/:id",render:function(e){return c.a.createElement(pe,e)}})))},he=n(183),Oe=function(e){function t(e){return Object(g.a)(this,t),Object(y.a)(this,Object(I.a)(t).call(this,e))}return Object(D.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"header-bar"},c.a.createElement("a",{href:"/"},"Cart"))}}]),t}(i.Component),ve=Object(he.a)(Oe),be=function(e){var t,n=e.type?e.type.toLowerCase():"";return c.a.createElement("div",{className:"notification-container ".concat(n," ").concat(e.isAnimate?"slide":""," ").concat(e.isFixed?"fixed":"")},c.a.createElement("div",{className:"notification-bg"}),c.a.createElement("div",{className:"close-button",onClick:function(){e.closeFn(e.id)}},"\u2716"),c.a.createElement("div",{className:"notification-content"},c.a.createElement("div",{className:"flex-container column"},c.a.createElement("div",{className:"flex-item timestamp"},(t=e.time,ee()(t).format("M/DD/YY hh:mm A").trim())),c.a.createElement("div",{className:"flex-item message"},e.message))))},Ee=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(y.a)(this,Object(I.a)(t).call(this))).handleCloseClick=function(e){n.props.notificationActions.deleteNotification(e)},n.notificationsContainer=function(){var e=O.orderBy(n.props.notifications.model,["timestamp"],["desc"]);return O.map(e,function(e){return c.a.createElement("div",{className:"flex-item",key:"note_".concat(e.notificationId)},c.a.createElement(be,{isAnimate:!0,type:e.side,message:"SIDE: ".concat(e.side),time:e.timestamp,id:e.notificationId,closeFn:n.handleCloseClick,isFixed:!1}))})},n}return Object(D.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this;return this.props.notifications.model?c.a.createElement("div",{className:"trade-notifications-container flex-container column"},O.isEmpty(this.props.notifications.model)?null:c.a.createElement("div",{className:"flex-item link-button",onClick:function(){e.handleCloseClick(-1)}},"clear all notifications"),this.notificationsContainer()):null}}]),t}(i.Component);var ke=Object(w.b)(function(e,t){return{notifications:e.notifications}},function(e){return{notificationActions:Object(l.b)(r,e)}})(Ee),Ce=function(e){function t(e){return Object(g.a)(this,t),Object(y.a)(this,Object(I.a)(t).call(this))}return Object(D.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement(ve,null),c.a.createElement(fe,null),c.a.createElement(ke,null))}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ne,je=n(180),ge=(n(137),Object(l.d)(k,Ne,Object(l.a)(j.a,N()())));s.a.render(c.a.createElement(w.a,{store:ge},c.a.createElement(je.a,null,c.a.createElement(Ce,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},97:function(e,t,n){e.exports=n(138)}},[[97,1,2]]]);
//# sourceMappingURL=main.92e155a6.chunk.js.map