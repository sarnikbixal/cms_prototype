(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{130:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setOrderSuccess",function(){return M}),n.d(a,"setOrderFailure",function(){return R}),n.d(a,"placeOrder",function(){return x}),n.d(a,"getOrder",function(){return B}),n.d(a,"updateOrderStatus",function(){return _}),n.d(a,"updateOrderStatusSuccess",function(){return U}),n.d(a,"downloadICS",function(){return K}),n.d(a,"createICS",function(){return Y});var r={};n.r(r),n.d(r,"deleteNotificationSuccess",function(){return G}),n.d(r,"deleteNotification",function(){return Q}),n.d(r,"newNotificationSuccess",function(){return V}),n.d(r,"mockTicketNotification",function(){return X});var i=n(0),o=n.n(i),c=n(9),s=n.n(c),l=n(12),u=n(33),d="SET_ORDER_SUCCESS",m="SET_ORDER_FAILURE",p="UPDATE_ORDER_STATUS_SUCCESS",f="DELETE_NOTIFICATION_SUCCESS",h="NEW_NOTIFICATION_SUCCESS",b=n(8),O={};var E=n(43),v={model:{}};var k=Object(l.c)({order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return t.order;case p:return Object(u.a)({},e,{steps:t.steps});default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TEST_NOTIFICATION":case h:return Object(u.a)({},e,{model:Object(u.a)({},e.model,Object(E.a)({},t.notification.notificationId,t.notification))});case f:var n=b.cloneDeep(e.model);return delete n[t.id],n=-1===t.id?{}:n,Object(u.a)({},e,{model:n});default:return e}}}),g=n(75),C=n.n(g),y=n(76);var N=n(16),D=n(13),j=n(19),w=n(17),S=n(18),T=n(172),I=n(170),A=n(22),F=n(44),P="https://bixal-cms-prototype.herokuapp.com";function M(e){return{type:d,order:e}}function R(e){return{type:m,order:e}}function x(e){var t="".concat(P,"/api/placeOrder"),n={params:{order:e}};return function(e){return new Promise(function(a,r){F.post(t,n).then(function(t){var n=t.data;n.error?(e(R(n.error)),r(n.error)):(e(M(n)),a(n))}).catch(function(t){e(M(t.message)),r(t.message)})})}}function B(e){var t="".concat(P,"/api/getOrder"),n={params:{orderId:"order_".concat(e)}};return function(e){return new Promise(function(a,r){F.post(t,n).then(function(t){var n=t.data;n.error?(e(R(n.error)),r(n.error)):(e(M(n)),a(n))}).catch(function(t){e(R(t.message)),r(t.message)})})}}function _(e){return function(t){t(U(e))}}function U(e){return{type:p,steps:e}}function K(e){var t="".concat(P,"/api/downloadICS"),n={};return function(e){F.get(t,n).then(function(e){var t=e.data;console.log(t)}).catch(function(e){console.log(e)})}}function Y(e,t){var n="".concat(P,"/api/createICS"),a={params:{order:e,date:t}};return function(e){return new Promise(function(e,t){F.post(n,a).then(function(n){var a=n.data;console.log(a),a.error?t(a.error):e(a)}).catch(function(e){t(e.message)})})}}var W=function(e){return b.map(e.products,function(e){return o.a.createElement("label",{className:"product btn btn-outline-secondary btn-block text-left font-weight-bolder",key:e.id},o.a.createElement("small",{className:"font-weight-normal pl-4"},e.title),o.a.createElement("small",{className:"font-weight-normal pl-4"},e.desc))})},L=function(e){return o.a.createElement("div",{className:"order"},o.a.createElement(W,{products:e.order.products}))},H=function(e){return o.a.createElement("button",{className:"button btn-success btn-block btn-lg",onClick:function(){e.submitOrderFn()}},"PLACE ORDER")},J=function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(j.a)(this,Object(w.a)(t).call(this))).placeOrder=function(){n.props.orderActions.placeOrder(n.state.order).then(function(e){n.setState({order:e,isPlaced:!0}),window.location.href="/order-confirmation/".concat(e.id)}).catch(function(e){console.log(e)})},n.state={isPlaced:!1,order:{id:1,placedDate:null,lastUpdateDate:null,user:{username:"test_user1",firstName:"justin",lastName:"sarnik",email:"justin.sarnik@bixal.com"},products:[{id:1,title:'AOC 22" MONITOR',desc:'AOC 22" MONITOR, AOC 22" MONITOR, AOC 22" MONITOR, AOC 22" MONITOR, AOC 22" MONITOR, AOC 22" MONITOR'},{id:2,title:"MacBook Keyboard",desc:"MacBook Keyboard, MacBook Keyboard, MacBook Keyboard, MacBook Keyboard, MacBook Keyboard, MacBook Keyboard"}],steps:[{id:1,status:"Ordered",timestamp:null,isPending:!0,isFilled:!1},{id:2,status:"Reviewed",timestamp:null,isPending:!0,isFilled:!1},{id:3,status:"Signed-Off",timestamp:null,isPending:!0,isFilled:!1},{id:4,status:"Ready For Pickup",timestamp:null,isPending:!0,isFilled:!1},{id:5,status:"Delivered",timestamp:null,isPending:!0,isFilled:!1}]}},n}return Object(S.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"order-container"},o.a.createElement("div",{className:"mt-2 mb-3"},o.a.createElement("p",null,"We come to you when you're ready. Pick a time and a technician will show up with your order and help you get everything set up."),o.a.createElement("p",null,"Here are some times that appear to be free on your calendar:")),o.a.createElement(L,{order:this.state.order}),o.a.createElement(H,{submitOrderFn:this.placeOrder}))}}]),t}(i.Component);var $=Object(A.b)(function(e,t){return{order:e.order}},function(e){return{orderActions:Object(l.b)(a,e)}})(J),q=function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(j.a)(this,Object(w.a)(t).call(this))).componentDidMount=function(){n.props.orderActions.getOrder(n.orderId).then(function(e){n.setState({order:e})}).catch(function(e){console.log(e)})},n.handleButtonClick=function(){window.location.href="/order-status/".concat(n.props.order.id)},n.orderId=e.match.params.id,n.state={},n}return Object(S.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"order-confirm-container"},o.a.createElement("div",null,"Confirm Order"),o.a.createElement("div",null,"Your Order Has Been Placed: "),o.a.createElement(W,{products:this.props.order.products}),o.a.createElement("button",{type:"button",className:"btn-info btn-block btn-lg",onClick:function(){e.handleButtonClick()}},"track order"))}}]),t}(i.Component);var z=Object(A.b)(function(e,t){return{order:e.order}},function(e){return{orderActions:Object(l.b)(a,e)}})(q);function G(e){return{type:f,id:e}}function Q(e){return function(t){t(G(e))}}function V(e){return{type:"NEW_NOTIFICATION_SUCCESS",notification:e}}function X(e,t){return function(n){var a=b.find(e.steps,{id:t});n(V({notificationType:"ticket",displayMessage:"Ticket Submitted: Order #:".concat(e.id," | Blocked-Action: ").concat(a.status),timestamp:new Date,notificationId:(new Date).getTime()}))}}var Z=n(28),ee=n.n(Z),te=function(e){return Z(e).format("M/DD/YY hh:mm A").trim()},ne=function(e){var t=0;return b.map(e.steps,function(n){var a=++t===e.steps.length;return o.a.createElement(re,{step:n,isLast:a,key:n.id,submitTicketFn:e.submitTicketFn})})},ae=function(e){return o.a.createElement("div",{className:"flex-container"},o.a.createElement("div",{className:"flex-item spacer ".concat(e.type)}))},re=function(e){var t=e.step.timestamp&&!e.step.isFilled||!e.step.isFilled&&!e.step.isPending,n=e.step.isFilled?"full":"half";return o.a.createElement("div",null,o.a.createElement("div",{className:"step flex-container ".concat(e.step.isFilled?"filled":""," ").concat(t?"blocked":"")},o.a.createElement("div",{className:"flex-item"},o.a.createElement("div",{className:"step-box"})),o.a.createElement("div",{className:"flex-item"},"-"),o.a.createElement("div",{className:"flex-item step-info"},o.a.createElement("span",{className:"step-status"},e.step.status),e.step.timestamp?o.a.createElement("span",{className:"step-date"}," - ",te(e.step.timestamp)):null)),t?o.a.createElement("div",{className:"flex-container"},o.a.createElement("div",{className:"flex-item"},"This step is taking longer than average to proceed. "),o.a.createElement("div",{className:"flex-item"},e.step.ticket&&!e.step.ticket.isResolved?o.a.createElement("span",null,"Ticket Submitted: ",te(e.step.ticket.timestamp)):o.a.createElement("button",{className:"btn btn-link",onClick:function(){return e.submitTicketFn(e.step.id)}},"Submit Ticket"))):null,e.isLast?null:o.a.createElement(ae,{type:n}))},ie=function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(j.a)(this,Object(w.a)(t).call(this))).componentDidMount=function(){b.isEmpty(n.props.order)&&n.props.orderActions.getOrder(n.orderId).then(function(e){n.fillStepsTimer(2,4)}).catch(function(e){console.log(e)})},n.componentDidUpdate=function(e){e.order.steps!==n.props.order.steps&&-1===b.findIndex(n.props.order.steps,{isFilled:!1})&&n.setAllFilled()},n.fillStepsTimer=function(e,t){var a=e,r=setInterval(function(){var e=b.cloneDeep(n.props.order.steps),i=b.find(e,{id:a}),o=b.find(e,{id:a-1});a<=e.length&&o.isFilled?(i.isPending=!1,i.isFilled=!t||t!==a,i.timestamp=(new Date).getTime(),n.props.orderActions.updateOrderStatus(e),a++):clearInterval(r)},500)},n.submitTicket=function(e){var t=b.cloneDeep(n.props.order.steps);b.find(t,{id:e}).ticket={timestamp:(new Date).getTime(),isResolved:!1},n.props.orderActions.updateOrderStatus(t),n.props.notificationActions.mockTicketNotification(n.props.order,e),setTimeout(function(){var t=b.cloneDeep(n.props.order.steps),a=b.find(t,{id:e});a.ticket.isResolved=!0,a.isFilled=!0,n.props.orderActions.updateOrderStatus(t),n.fillStepsTimer(e+1,null)},1e3)},n.handlePickupClick=function(){window.location.href="/schedule-pickup/".concat(n.props.order.id)},n.orderId=e.match.params.id,n.state={},n}return Object(S.a)(t,e),Object(D.a)(t,[{key:"setAllFilled",value:function(){this.setState({isReadyForPickup:!0})}},{key:"render",value:function(){var e=this,t=this.props.order.products?this.props.order.products.length:0;return o.a.createElement("div",{className:"status-container"},o.a.createElement("div",{className:"mt-2 mb-3"},o.a.createElement("p",null,"Tracking Order #: ",this.props.order.id),o.a.createElement("p",null,"Items: ",t),o.a.createElement("p",null,"Order Date: ",te(this.props.order.placedDate))),o.a.createElement("div",{className:"steps-container"},o.a.createElement(ne,{steps:this.props.order.steps,submitTicketFn:this.submitTicket}),this.state.isReadyForPickup?o.a.createElement("div",{className:"mt-2 mb-3"},o.a.createElement("button",{type:"button",className:"btn btn-primary btn-block btn-lg",onClick:function(){e.handlePickupClick()}},"Schedule Pickup Date")):null))}}]),t}(i.Component);var oe=Object(A.b)(function(e,t){return{order:e.order,notifications:e.notifications}},function(e){return{orderActions:Object(l.b)(a,e),notificationActions:Object(l.b)(r,e)}})(ie),ce=n(169),se=n(167),le=n(83),ue=n(54),de="https://bixal-cms-prototype.herokuapp.com",me=function(e){return o.a.createElement(ue.c,{utils:e.utils},o.a.createElement(ce.a,{container:!0,className:e.classes,justify:"space-around"},o.a.createElement(ue.a,{margin:"normal",id:"mui-pickers-date",label:"Select Date",value:e.selectedDate,onChange:e.handleDateChange,KeyboardButtonProps:{"aria-label":"select date"}}),o.a.createElement(ue.b,{margin:"normal",id:"mui-pickers-time",label:"Select Time",value:e.selectedDate,onChange:e.handleDateChange,KeyboardButtonProps:{"aria-label":"select time"}})))},pe=function(e){var t=[new Date("2019-06-25 12:00:00 PM"),new Date("2019-06-25 3:00:00 PM"),new Date("2019-06-26 9:00:00 AM")];return b.map(t,function(t){return o.a.createElement("label",{className:"btn btn-outline-secondary btn-block text-left font-weight-bolder",key:t.getTime()},o.a.createElement("input",{type:"radio",autoComplete:"off",name:"time",id:"time1",onClick:function(){e.handleDateChange(t)}})," ",Z(t).format("dddd - M/DD/YY").trim()," ",o.a.createElement("br",null),o.a.createElement("small",{className:"font-weight-normal pl-4"},function(e){return"".concat(Z(e).format("h").trim()," - ").concat(Z(e).add(30,"minutes").format("hh:mm A").trim())}(t)))})},fe=function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(j.a)(this,Object(w.a)(t).call(this,e))).componentDidMount=function(){b.isEmpty(n.props.order)&&n.props.orderActions.getOrder(n.orderId).then(function(e){}).catch(function(e){})},n.handleDateChange=function(e){n.setState({selectedDate:e})},n.handleConfirm=function(){n.props.orderActions.createICS(n.props.order,n.state.selectedDate).then(function(e){n.setState({isReadyForDownload:!0})}).catch(function(e){})},n.handleDownloadICS=function(){window.location.href="".concat(de,"/api/downloadICS")},n.handleChooseDate=function(){n.setState({isShowDatePicker:!0})},n.orderId=e.match.params.id,n.state={selectedDate:(new Date).getTime()},n.classes=Object(se.a)({grid:{width:"60%"}}),n}return Object(S.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e,t=this;return o.a.createElement("div",{className:"schedule-container"},o.a.createElement("div",{className:"mt-2 mb-3"},o.a.createElement("p",null,"We come to you when you're ready. Pick a time and a technician will show up with your order and help you get everything set up."),o.a.createElement("p",null,"Here are some times that appear to be free on your calendar:"),o.a.createElement("p",null,(e=this.state.selectedDate,Z(e).format("M/DD/YY hh:mm A").trim()))),o.a.createElement("div",null,o.a.createElement(pe,{handleDateChange:this.handleDateChange})),o.a.createElement("div",{className:"container"},this.state.isShowDatePicker?o.a.createElement(me,{utils:le.a,classes:this.classes,selectedDate:this.state.selectedDate,handleDateChange:this.handleDateChange}):null,this.state.isReadyForDownload?o.a.createElement("button",{type:"button",className:"btn btn-success btn-block btn-lg",onClick:function(){t.handleDownloadICS()}},"Download ICS"):o.a.createElement("button",{type:"button",className:"btn btn-primary btn-block btn-lg",onClick:function(){t.handleConfirm()}},"Set Delivery Time"),o.a.createElement("p",{className:"mt-3"},"None of these work? ",o.a.createElement("a",{href:"#",onClick:function(){t.handleChooseDate()}},"Find another time"))))}}]),t}(i.Component);var he=Object(A.b)(function(e,t){return{order:e.order,notifications:e.notifications}},function(e){return{orderActions:Object(l.b)(a,e),notificationActions:Object(l.b)(r,e)}})(fe),be=function(e){return o.a.createElement("div",{className:"container"},o.a.createElement(T.a,null,o.a.createElement(I.a,{exact:!0,path:"/",render:function(e){return o.a.createElement($,Object.assign({pageTitle:"Check Out"},e))}},o.a.createElement(I.a,{exact:!0,path:"/checkout",render:function(e){return o.a.createElement($,e)}})),o.a.createElement(I.a,{exact:!0,path:"/order-confirmation/:id",render:function(e){return o.a.createElement(z,e)}}),o.a.createElement(I.a,{exact:!0,path:"/order-status/:id",render:function(e){return o.a.createElement(oe,e)}}),o.a.createElement(I.a,{exact:!0,path:"/schedule-pickup/:id",render:function(e){return o.a.createElement(he,e)}})))},Oe=n(173),Ee=function(e){function t(e){var n;return Object(N.a)(this,t),n=Object(j.a)(this,Object(w.a)(t).call(this,e)),console.log(e),n.state={pageTitle:"Check Out"},n}return Object(S.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){return o.a.createElement("nav",{className:"navbar navbar-light bg-light"},o.a.createElement("a",{href:"/"},"Cart"),o.a.createElement("span",{className:"navbar-brand mb-0 h1"},this.props.pageTitle||null))}}]),t}(i.Component),ve=Object(Oe.a)(Ee),ke=function(e){return o.a.createElement("div",{class:"notification"},o.a.createElement("div",{class:"alert alert-info",role:"alert"},o.a.createElement("p",null,(t=e.time,ee()(t).format("M/DD/YY hh:mm A").trim())),o.a.createElement("p",null,e.message)),o.a.createElement("button",{type:"button",className:"btn btn-outline-info",onClick:function(){e.closeFn(e.id)}},"Close"));var t},ge=function(e){function t(e){var n;return Object(N.a)(this,t),(n=Object(j.a)(this,Object(w.a)(t).call(this))).handleCloseClick=function(e){n.props.notificationActions.deleteNotification(e)},n.notificationsContainer=function(){var e=b.orderBy(n.props.notifications.model,["timestamp"],["desc"]);return b.map(e,function(e){return o.a.createElement(ke,{isAnimate:!0,type:e.side,message:e.displayMessage,time:e.timestamp,id:e.notificationId,closeFn:n.handleCloseClick,isFixed:!1})})},n}return Object(S.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){return this.props.notifications.model?o.a.createElement("div",{className:"notifications-container flex-container column"},this.notificationsContainer()):null}}]),t}(i.Component);var Ce=Object(A.b)(function(e,t){return{notifications:e.notifications}},function(e){return{notificationActions:Object(l.b)(r,e)}})(ge),ye=function(e){function t(e){return Object(N.a)(this,t),Object(j.a)(this,Object(w.a)(t).call(this))}return Object(S.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(ve,null),o.a.createElement(be,null),o.a.createElement(Ce,null))}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ne,De=n(171),je=(n(130),Object(l.d)(k,Ne,Object(l.a)(y.a,C()())));s.a.render(o.a.createElement(A.a,{store:je},o.a.createElement(De.a,null,o.a.createElement(ye,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},90:function(e,t,n){e.exports=n(131)}},[[90,1,2]]]);
//# sourceMappingURL=main.4470c908.chunk.js.map